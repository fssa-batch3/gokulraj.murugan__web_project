<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../Assets/Css/profile.css">
</head>

<body>
    <div class="navigation">
        <div>
            <img src="../Assets/Images/Screenshot__74..png" width="90%" id="logo" alt="">
        </div>

        <ul>

            <li>
                <a href="./dashboard.html">
                    <span class="icon">
                        <i class="fa-solid fa-house"></i>
                    </span>
                    <span class="title">Home</span>
                </a>
            </li>
            <li>
                <a href="./Exchange.html">
                    <span class="icon">
                        <i class="fa-solid fa-arrows-rotate"></i>
                    </span>
                    <span class="title">Exchange</span>
                </a>
            </li>
            <li>
                <a href="./wallet.html">
                    <span class="icon">
                        <i class="fa-solid fa-wallet"></i>
                    </span>
                    <span class="title">Wallet</span>
                </a>
            </li>
            <li>
                <a href="./cryptos.html">
                    <span class="icon">
                        <i class="fa-solid fa-square-poll-vertical"></i>
                    </span>
                    <span class="title">Chart</span>
                </a>
            </li>
            <li>
                <a href="./profile.html">
                    <span class="icon">
                        <i class="fa-solid fa-user"></i>
                    </span>
                    <span class="title">Profile</span>
                </a>
            </li>
            <li>
                <a href="../Pages/content.html">
                    <span class="icon">
                        <i class="fa-solid fa-book"></i>
                    </span>
                    <span class="title">Blog</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="box">
        <div class="box1">

            <div class="profile_pic">
                <img src="" alt="" id="profile_image">
            </div>
            <div class="profile_details">


                <form action="" id="form">
                    <!-- <h2>My profile</h2>  -->
                    <div class="input_tag">
                        <label for="profille_pic">Profile Pic</label>
                        <input type="url" name="profille_pic" id="profile_pic" disabled>

                    </div>


                    <div class="input_tag">
                        <label for="name" id="na">UserName</label>
                        <input type="text" name="name" id="name" pattern="[A-Za-z]{1,32}" disabled>

                    </div>

                    <div class="input_tag">
                        <label for="email">Email</label>
                        <input type="email" name="email" id="email" disabled>

                    </div>

                    <div class="input_tag">
                        <label for="phone_no">Phone Number</label>
                        <input type="number" name="phone_no" id="phone_number"
                            pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
                            title="Enter a Uppercase,a lowercase, a number,a special character" disabled>
                    </div>

                    <button id="btn1">Edit</button>
                    <button id="delete">Log out</button>
                </form>
            </div>

        </div>

        <div class="right_box">
            <!-- <div class="box3">
                <div class="heading">
                    <h4>Passwords</h4>
                </div>
                <hr class="line">
                <div class="password_box">
                    <label for="password">Password : </label>
                    <input type="password" name="password" id="password" disabled>
                    <br>

                    <label for="confirm_password">Confirm Password :</label>
                    <input type="password" name="confirm_password" id="confirm_password" disabled>
                </div>
            </div> -->

            <div class="box2">
                <div class="heading">
                    <h4>Payment Card</h4>
                    <button>Edit</button>
                </div>
                <hr class="line">
                <div class="payment_box">
                    <div>
                        <img src="../Assets/Images/Mastercard-logo.png" alt="">
                        <h4>Master card account</h4>
                    </div>
                    <div>
                        <label for="">Card Number :</label>
                        <input type="number">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://kit.fontawesome.com/ee40c53027.js" crossorigin="anonymous" integrity="">
    </script>
    <script>
        const userdata = JSON.parse(localStorage.getItem("userdata"));// getting data from localStorage
        const profile = JSON.parse(localStorage.getItem("login"));

        let check;
        let res;

        //assigning variables
        const profile_pic = document.getElementById("profile_pic");
        const email = document.getElementById("email");
        const name = document.getElementById("name");
        const phone_number = document.getElementById("phone_number");
        // const password = document.getElementById("password");
        // const confirm_password = document.getElementById("confirm_password")
        const profile_image = document.getElementById("profile_image");

        // showing datas in Profile Page
        userdata.find(e => {
            if (e.email == profile.email) {
                res = e;
            }
        })
        //   console.log(res)

        name.value = res.username;
        email.value = res.email;
        phone_number.value = res.phone_number;
        if (res.profile_pic == null) {
            profile_pic.value = "https://iili.io/HSXZjrg.png"
            profile_image.src = "https://iili.io/HSXZjrg.png"
        }
        else {
            profile_image.src = res.profile_pic
            profile_pic.value = res.profile_pic
        }



        //           Update profile  

        const edit = document.getElementById("btn1")
        const logout = document.getElementById("delete")
        const form = document.getElementById("form");


        form.addEventListener("submit", e => {
            e.preventDefault()
            update_profile()
        })

        function update_profile() {

            if (edit.innerText == "Edit") {

                edit.innerText = "Save"

                profile_pic.removeAttribute("disabled")
                name.removeAttribute("disabled")
                phone_number.removeAttribute("disabled")
                logout.style.display = "block"
            }
            else if (edit.innerText == "Save") {

                edit.innerText = "Edit"
                
                res.profile_pic = profile_pic.value;
                res.username = name.value;
                res.email = email.value;
                res.phone_number = phone_number.value;
                res.profile_pic = profile_pic.value;

                alert("Profile Updated âœŒ")

                profile_pic.setAttribute("disabled", "")
                name.setAttribute("disabled", "")
                phone_number.setAttribute("disabled", "")
                profile_image.src = res.profile_pic
                logout.style.display = "none"
                console.log(profile_image);

                localStorage.setItem("userdata", JSON.stringify(user_details))

            }
        }
        //     Udpate profile completed


        //         Delete Profile
        logout.addEventListener("click", e => {
            e.preventDefault()
            alert("Are Your are sure You want to log out?")
            localStorage.removeItem("login")
            window.location.href = "../../index.html"
        })


    </script>

</body>

</html>